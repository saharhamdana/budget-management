
    <!-- Main content -->
    <div class="content-area flex-grow-1 overflow-auto p-4">
      <div class="container budget-page mt-4">
        <h2 class="page-title mb-4">Mes Budgets</h2>

        <!-- Ajouter un budget -->
        <div class="card p-4 mb-4 shadow-sm">
          <h5 class="card-title">Ajouter un budget</h5>
          <form (submit)="ajouterBudget()">
            <div class="row g-3 align-items-end">
              <div class="col-md-4">
                <label for="categorie" class="form-label">Cat√©gorie</label>
                    <select id="categorie" class="form-select rounded shadow-sm" [(ngModel)]="newBudget.categorie" name="categorie" required>
  <option value="" disabled selected>Choisir une cat√©gorie</option>
  <option *ngFor="let cat of categories" [ngValue]="cat">
    {{ cat.nomAng }} ({{ cat.nomAr }})
  </option>
</select>
              </div>
              <div class="col-md-4">
                <label for="montant" class="form-label">Montant</label>
                <input type="number" id="montant" class="form-control" [(ngModel)]="newBudget.montant" name="montant" required />
              </div>
              <div class="col-md-4">
                <button class="btn btn-orange w-100" type="submit">Ajouter</button>
              </div>
            </div>
          </form>
        </div>
        

        <!-- Liste des budgets -->
<div class="card p-4 shadow-sm">
  <h5 class="card-title">Liste des Budgets</h5>
  <table class="table table-hover mt-3 align-middle">
    <thead class="table-blue text-white">
      <tr>
        <th>#</th>
        <th>Cat√©gorie</th>
        <th>Montant Mensuel</th>
        <th>D√©penses R√©elles</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let budget of budgets; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ budget.categorie.nomAng }}</td>

        <!-- Montant mensuel -->
        <td>
          <span *ngIf="!budget.editing">{{ budget.amountPerMonth }} TND</span>
          <input *ngIf="budget.editing"
                type="number"
                [(ngModel)]="budget.amountPerMonth"
                class="form-control form-control-sm"
                style="width:100px; display:inline-block;" />
        </td>

        <!-- Progress bar des d√©penses r√©elles -->
        <td style="min-width: 200px;">
          <div class="progress" style="height: 20px; border-radius: 10px; overflow: hidden;">
            <div class="progress-bar"
                role="progressbar"
                [ngClass]="budget.realAmount > budget.amountPerMonth ? 'bg-danger' : 'bg-success'"
                [style.width.%]="(budget.realAmount / budget.amountPerMonth) * 100">
              {{ budget.realAmount }} TND
            </div>
          </div>
          <small class="text-muted">
            {{ ((budget.realAmount / budget.amountPerMonth) * 100) | number : '1.0-0' }}% du budget utilis√©
          </small>
        </td>

        <!-- Actions -->
        <td>
          <button *ngIf="!budget.editing"
                  class="btn btn-sm btn-outline-primary me-2"
                  (click)="enableEdit(budget)">
            <i class="fas fa-edit"></i>
          </button>

          <button *ngIf="budget.editing"
                  class="btn btn-sm btn-success me-2"
                  (click)="saveBudget(budget)">
            <i class="fas fa-check"></i>
          </button>

          <button class="btn btn-sm btn-outline-danger me-2"
                  (click)="supprimerBudget(budget.id)">
            <i class="fas fa-trash"></i>
          </button>

          <button class="btn btn-sm btn-outline-warning"
                  (click)="onUpdateRealAmount(budget.id)">
            üîÑ
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

      </div>
    </div>
  